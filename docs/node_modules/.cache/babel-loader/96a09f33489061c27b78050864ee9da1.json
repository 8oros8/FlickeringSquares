{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _classCallCheck from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/andreysmirnov/Documents/\\u0424\\u0440\\u043E\\u043D\\u0442/flickeringSquares/flickeringsquares/docs/node_modules/@babel/runtime/helpers/esm/createSuper.js\";// noinspection JSPotentiallyInvalidUsageOfClassThis\nimport React from'react';import ReactDOM from'react-dom';import'./index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var timeoutStorage=[];var Square=/*#__PURE__*/function(_React$Component){_inherits(Square,_React$Component);var _super=_createSuper(Square);function Square(){var _this;_classCallCheck(this,Square);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.activateButton=function(e){if(this.props.flickeringMemory.length>0){if(parseInt(this.props.flickeringMemory[0].id[0])===this.props.coords[0]&&parseInt(this.props.flickeringMemory[0].id[2])===this.props.coords[1]){e.target.style.backgroundColor='white';this.props.flickeringMemory.shift();if(this.props.flickeringMemory.length===0){this.props.updateLevelStatus(true);}setTimeout(function(){e.target.style.backgroundColor='#799E00';},500);}else{e.target.style.backgroundColor='red';var _iterator=_createForOfIteratorHelper(timeoutStorage),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var timeoutId=_step.value;clearTimeout(timeoutId);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(document.querySelectorAll('.square')),_step2;try{var _loop=function _loop(){var square=_step2.value;setTimeout(function(){square.style.background='#799E00';},500);};for(_iterator2.s();!(_step2=_iterator2.n()).done;){_loop();}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var updateMistakeStatus=this.props.updateMistakeStatus.bind(this);setTimeout(function(){e.target.style.backgroundColor='#799E00';},500);setTimeout(function(){updateMistakeStatus(true);},2000);}}};_this.activateButton=_this.activateButton.bind(_assertThisInitialized(_this));return _this;}_createClass(Square,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"button\",{className:\"square\",id:this.props.coords[0]+\":\"+this.props.coords[1],onClick:this.activateButton,children:this.props.value});}}]);return Square;}(React.Component);var Row=/*#__PURE__*/function(_React$Component2){_inherits(Row,_React$Component2);var _super2=_createSuper(Row);function Row(){var _this2;_classCallCheck(this,Row);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this2=_super2.call.apply(_super2,[this].concat(args));_this2.renderSquares=function(counter,rowNumber){var renderArray=[];for(var i=0;i<counter;i++){renderArray.push(/*#__PURE__*/_jsx(Square,{coords:[rowNumber,i],flickeringMemory:this.props.flickeringMemory,levelPassed:this.props.levelPassed,updateLevelStatus:this.props.updateLevelStatus,updateMistakeStatus:this.props.updateMistakeStatus},i));}return renderArray;};return _this2;}_createClass(Row,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"board-row\",children:this.renderSquares(this.props.numberColumns,this.props.rowNumber)});}}]);return Row;}(React.Component);var Board=/*#__PURE__*/function(_React$Component3){_inherits(Board,_React$Component3);var _super3=_createSuper(Board);function Board(){var _this3;_classCallCheck(this,Board);for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}_this3=_super3.call.apply(_super3,[this].concat(args));_this3.state={flickeringMemory:[],levelPassed:false,levelNumber:0,mistakeMade:false,squaresArray:[],numberRows:3,numberColumns:3,complexity:2};_this3.updateLevelStatus=function(value){_this3.setState({levelPassed:value});};_this3.incrementLevelNumber=function(value){var newLevelNumber=_this3.state.levelNumber+value;_this3.setState({levelNumber:newLevelNumber,complexity:2+Math.ceil(newLevelNumber/2),numberColumns:3+Math.floor(newLevelNumber/5),numberRows:3+Math.floor(newLevelNumber/5)});var startClickHandler=_this3.startClickHandler.bind(_assertThisInitialized(_this3));var updateSquaresArray=_this3.updateSquaresArray.bind(_assertThisInitialized(_this3));setTimeout(function(){updateSquaresArray();startClickHandler();},2000);};_this3.updateMistakeStatus=function(value){_this3.setState({mistakeMade:value});};_this3.updateSquaresArray=function(){_this3.setState({squaresArray:Array.from(document.getElementById('root').querySelectorAll('.square'))});};_this3.startClickHandler=function(){// noinspection JSPotentiallyInvalidUsageOfClassThis\nif(this.state.levelPassed===true||this.state.mistakeMade===true||this.state.levelNumber===0){// noinspection JSPotentiallyInvalidUsageOfClassThis\nthis.setState({levelPassed:false,flickeringMemory:this.startFlickering()});}};_this3.startClickHandler=_this3.startClickHandler.bind(_assertThisInitialized(_this3));_this3.resetClickHandler=function(){var _iterator3=_createForOfIteratorHelper(timeoutStorage),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var timeoutId=_step3.value;clearTimeout(timeoutId);}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}var _iterator4=_createForOfIteratorHelper(document.querySelectorAll('.square')),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var square=_step4.value;square.style.background='#799E00';}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}this.setState({flickeringMemory:[],levelPassed:false,levelNumber:0,mistakeMade:false,complexity:2,numberColumns:3,numberRows:3});};_this3.resetClickHandler=_this3.resetClickHandler.bind(_assertThisInitialized(_this3));_this3.renderRows=function(counter){var renderArray=[];for(var i=0;i<counter;i++){renderArray.push(/*#__PURE__*/_jsx(Row,{rowNumber:i,flickeringMemory:this.state.flickeringMemory,levelPassed:this.state.levelPassed,updateLevelStatus:this.updateLevelStatus,updateMistakeStatus:this.updateMistakeStatus,numberRows:this.state.numberRows,numberColumns:this.state.numberColumns},i));}return renderArray;};_this3.randomFlicker=function(squaresArray){var elementsArray=squaresArray.length===0?Array.from(document.getElementById('root').querySelectorAll('.square')):squaresArray;var randomNumbers=[];var randomFlickeringArray=[];var min=0;var max=this.state.numberColumns*this.state.numberRows-1;for(var i=0;i<this.state.complexity;i++){var randomIndex=Math.floor(Math.random()*(max-min+1))+min;randomNumbers.push(randomIndex);}for(var _i=0,_randomNumbers=randomNumbers;_i<_randomNumbers.length;_i++){var index=_randomNumbers[_i];randomFlickeringArray.push(elementsArray[index]);}return randomFlickeringArray;};_this3.randomFlicker=_this3.randomFlicker.bind(_assertThisInitialized(_this3));_this3.startFlickering=function(){var flickeringArray=this.randomFlicker(this.state.squaresArray);var _loop2=function _loop2(i){var timeout=i===0?0:i*1500;var firstTimeoutId=setTimeout(function(){flickeringArray[i].style.background='white';},timeout);timeoutStorage.push(firstTimeoutId);var secondTimeoutId=setTimeout(function(){flickeringArray[i].style.background='#799E00';},timeout+900);timeoutStorage.push(secondTimeoutId);};for(var i=0;i<flickeringArray.length;i++){_loop2(i);}return flickeringArray;};_this3.startFlickering=_this3.startFlickering.bind(_assertThisInitialized(_this3));return _this3;}_createClass(Board,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(prevState.mistakeMade===false&&this.state.mistakeMade===true){this.updateMistakeStatus(false);this.startClickHandler();}if(prevState.levelPassed===false&&this.state.levelPassed===true){this.incrementLevelNumber(1);}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[this.renderRows(this.state.numberRows),/*#__PURE__*/_jsxs(\"div\",{className:'buttonsWrapper',children:[/*#__PURE__*/_jsx(\"button\",{className:'mainButton',onClick:this.startClickHandler,children:\"Start\"}),/*#__PURE__*/_jsx(\"button\",{className:'mainButton',onClick:this.resetClickHandler,children:\"Reset\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:'levelInfo',children:[\"Level: \",this.state.levelNumber]})]});}}]);return Board;}(React.Component);var Game=/*#__PURE__*/function(_React$Component4){_inherits(Game,_React$Component4);var _super4=_createSuper(Game);function Game(){_classCallCheck(this,Game);return _super4.apply(this,arguments);}_createClass(Game,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{className:\"game\",children:/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",children:/*#__PURE__*/_jsx(Board,{})})});}}]);return Game;}(React.Component);ReactDOM.render(/*#__PURE__*/_jsx(Game,{}),document.getElementById('root'));","map":{"version":3,"sources":["/Users/andreysmirnov/Documents/Фронт/flickeringSquares/flickeringsquares/docs/src/index.js"],"names":["React","ReactDOM","timeoutStorage","Square","activateButton","e","props","flickeringMemory","length","parseInt","id","coords","target","style","backgroundColor","shift","updateLevelStatus","setTimeout","timeoutId","clearTimeout","document","querySelectorAll","square","background","updateMistakeStatus","bind","value","Component","Row","renderSquares","counter","rowNumber","renderArray","i","push","levelPassed","numberColumns","Board","state","levelNumber","mistakeMade","squaresArray","numberRows","complexity","setState","incrementLevelNumber","newLevelNumber","Math","ceil","floor","startClickHandler","updateSquaresArray","Array","from","getElementById","startFlickering","resetClickHandler","renderRows","randomFlicker","elementsArray","randomNumbers","randomFlickeringArray","min","max","randomIndex","random","index","flickeringArray","timeout","firstTimeoutId","secondTimeoutId","prevProps","prevState","snapshot","Game","render"],"mappings":"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","sourcesContent":["\n// noinspection JSPotentiallyInvalidUsageOfClassThis\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nlet timeoutStorage = []\n\nclass Square extends React.Component {\n    activateButton = function (e) {\n        if (this.props.flickeringMemory.length > 0) {\n            if ((parseInt(this.props.flickeringMemory[0].id[0]) === this.props.coords[0]) && (parseInt(this.props.flickeringMemory[0].id[2]) === this.props.coords[1])) {\n                e.target.style.backgroundColor = 'white'\n                this.props.flickeringMemory.shift()\n                if (this.props.flickeringMemory.length === 0) {\n                    this.props.updateLevelStatus(true)\n                }\n                setTimeout(function () {\n                    e.target.style.backgroundColor = '#799E00'\n                }, 500)\n            }\n            else {\n                e.target.style.backgroundColor = 'red'\n                for (let timeoutId of timeoutStorage) {\n                    clearTimeout(timeoutId)\n                }\n                for (let square of document.querySelectorAll('.square')) {\n                    setTimeout(function () {\n                        square.style.background = '#799E00'\n                    }, 500)\n                }\n                let updateMistakeStatus = this.props.updateMistakeStatus.bind(this)\n                setTimeout(function () {\n                    e.target.style.backgroundColor = '#799E00'\n                }, 500)\n                setTimeout(function () {\n                    updateMistakeStatus(true)\n                }, 2000)\n            }\n        }\n    }\n    activateButton = this.activateButton.bind(this)\n    render() {\n        return (\n            <button className=\"square\" id={this.props.coords[0] + \":\" + this.props.coords[1]} onClick={this.activateButton}>\n                {this.props.value}\n            </button>\n        );\n    }\n}\n\nclass Row extends React.Component {\n    renderSquares = function (counter, rowNumber) {\n        let renderArray = []\n        for (let i = 0; i < counter; i++) {\n            renderArray.push(<Square key = {i}\n                                     coords = {[rowNumber, i]}\n                                     flickeringMemory = {this.props.flickeringMemory}\n                                     levelPassed = {this.props.levelPassed}\n                                     updateLevelStatus = {this.props.updateLevelStatus}\n                                     updateMistakeStatus = {this.props.updateMistakeStatus}\n            />)\n        }\n        return renderArray\n    }\n    render() {\n        return (\n            <div className=\"board-row\">\n                {this.renderSquares(this.props.numberColumns, this.props.rowNumber)}\n            </div>\n        )\n    }\n}\n\nclass Board extends React.Component {\n    state = {\n        flickeringMemory: [],\n        levelPassed: false,\n        levelNumber: 0,\n        mistakeMade: false,\n        squaresArray: [],\n        numberRows: 3,\n        numberColumns: 3,\n        complexity: 2,\n    }\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if ((prevState.mistakeMade === false) && (this.state.mistakeMade === true)) {\n            this.updateMistakeStatus(false)\n            this.startClickHandler()\n        }\n        if ((prevState.levelPassed === false) && (this.state.levelPassed === true)) {\n            this.incrementLevelNumber(1)\n        }\n    }\n\n    updateLevelStatus = (value) => {\n        this.setState({\n            levelPassed: value\n        })\n    }\n    incrementLevelNumber = (value) => {\n        let newLevelNumber = this.state.levelNumber + value\n        this.setState({\n            levelNumber: newLevelNumber,\n            complexity: 2 + (Math.ceil(newLevelNumber/2)),\n            numberColumns: 3 + (Math.floor(newLevelNumber/5)),\n            numberRows: 3 + (Math.floor(newLevelNumber/5)),\n        })\n        let startClickHandler = this.startClickHandler.bind(this)\n        let updateSquaresArray = this.updateSquaresArray.bind(this)\n        setTimeout(function () {\n            updateSquaresArray()\n            startClickHandler()\n        }, 2000)\n    }\n    updateMistakeStatus = (value) => {\n        this.setState({\n            mistakeMade: value\n        })\n    }\n    updateSquaresArray = () => {\n        this.setState({\n            squaresArray: Array.from(document.getElementById('root').querySelectorAll('.square'))\n        })\n    }\n    startClickHandler = function () {\n        // noinspection JSPotentiallyInvalidUsageOfClassThis\n        if ((this.state.levelPassed === true) || (this.state.mistakeMade === true) || (this.state.levelNumber === 0)){\n            // noinspection JSPotentiallyInvalidUsageOfClassThis\n            this.setState({\n                levelPassed: false,\n                flickeringMemory: this.startFlickering(),\n            })\n        }\n    }\n    startClickHandler = this.startClickHandler.bind(this)\n    resetClickHandler = function () {\n        for (let timeoutId of timeoutStorage) {\n            clearTimeout(timeoutId)\n        }\n        for (let square of document.querySelectorAll('.square')) {\n            square.style.background = '#799E00'\n        }\n        this.setState({\n            flickeringMemory: [],\n            levelPassed: false,\n            levelNumber: 0,\n            mistakeMade: false,\n            complexity: 2,\n            numberColumns: 3,\n            numberRows: 3,\n        })\n    }\n    resetClickHandler = this.resetClickHandler.bind(this)\n    renderRows = function (counter) {\n        let renderArray = []\n        for (let i = 0; i < counter; i++) {\n            renderArray.push(<Row\n                key={i}\n                rowNumber = {i}\n                flickeringMemory = {this.state.flickeringMemory}\n                levelPassed = {this.state.levelPassed}\n                updateLevelStatus = {this.updateLevelStatus}\n                updateMistakeStatus = {this.updateMistakeStatus}\n                numberRows = {this.state.numberRows}\n                numberColumns = {this.state.numberColumns}\n            />)\n        }\n        return renderArray\n    }\n    randomFlicker = function (squaresArray) {\n        let elementsArray = squaresArray.length === 0 ? Array.from(document.getElementById('root').querySelectorAll('.square')) : squaresArray\n        let randomNumbers = []\n        let randomFlickeringArray = []\n        let min = 0\n        let max = this.state.numberColumns*this.state.numberRows - 1\n        for (let i = 0; i < this.state.complexity; i++) {\n            let randomIndex = Math.floor(Math.random() * (max - min + 1)) + min\n            randomNumbers.push(randomIndex)\n        }\n        for (let index of randomNumbers) {\n            randomFlickeringArray.push(elementsArray[index])\n        }\n        return randomFlickeringArray\n    }\n    randomFlicker = this.randomFlicker.bind(this)\n\n    startFlickering = function () {\n        let flickeringArray = this.randomFlicker(this.state.squaresArray)\n        for (let i = 0; i < flickeringArray.length; i++) {\n            let timeout = i === 0? 0 : i * 1500\n            let firstTimeoutId = setTimeout(function () {\n                flickeringArray[i].style.background = 'white'\n            }, timeout)\n            timeoutStorage.push(firstTimeoutId)\n            let secondTimeoutId = setTimeout(function () {\n                flickeringArray[i].style.background = '#799E00'\n            }, timeout+900)\n            timeoutStorage.push(secondTimeoutId)\n        }\n        return flickeringArray\n    }\n    startFlickering = this.startFlickering.bind(this)\n    render() {\n        return (\n            <div>\n                {this.renderRows(this.state.numberRows)}\n                <div className={'buttonsWrapper'}>\n                    <button className={'mainButton'} onClick={this.startClickHandler}>\n                        Start\n                    </button>\n                    <button className={'mainButton'} onClick={this.resetClickHandler}>\n                        Reset\n                    </button>\n                </div>\n                <div className={'levelInfo'}>\n                    Level: {this.state.levelNumber}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Game extends React.Component {\n    render() {\n        return (\n            <div className=\"game\">\n                <div className=\"game-board\">\n                    <Board />\n                </div>\n            </div>\n        );\n    }\n}\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n\n\n"]},"metadata":{},"sourceType":"module"}